(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d874f78"],{1978:function(t,i,e){},e4ab:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("section",{staticClass:"activity-modify"},[e("sub-layout",[e("div",[e("div",{staticClass:"title"},[e("h4",[e("b",[t._v("활동사진 게시판")])])]),e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 subject"},[e("label",[t._v("제목")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.activity.bbs.title,expression:"activity.bbs.title"}],staticClass:"w-80 d-inline-block form-control",attrs:{type:"text"},domProps:{value:t.activity.bbs.title},on:{input:function(i){i.target.composing||t.$set(t.activity.bbs,"title",i.target.value)}}})]),e("div",{staticClass:"col-12 content"},[null!=t.activity.bbs.content?e("quill",{attrs:{qContent:t.activity.bbs.content},on:{"update:qContent":function(i){return t.$set(t.activity.bbs,"content",i)},"update:q-content":function(i){return t.$set(t.activity.bbs,"content",i)}}}):t._e()],1),t._l(t.activity.attachImage,function(i){return t.activity.attachImage?e("div",[e("div",[e("img",{staticStyle:{width:"200px"},attrs:{src:""+t.store.state.basePath+i.resourcePath+"/"+i.virtualName}}),t._v("  "),e("button",{staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(e){return t.deleteFile(i.id)}}},[t._v("삭제")])])]):t._e()}),e("div",{staticClass:"col-12 content"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.fileCountAdd}},[t._v("첨부파일 추가")])]),e("div",{staticClass:"col-12"},[t._l(t.fileCount,function(i){return[e("div",{staticStyle:{"margin-top":"5px"}},[e("img",{ref:"file_"+i,refInFor:!0,staticStyle:{width:"200px"}}),t._v("  \n\t\t\t\t\t\t\t\t\t\t\t"),e("input",{attrs:{type:"file",id:"file_"+i,accept:"image/jpeg,image/gif,image/png"},on:{change:t.uploadFile}})])]})],2)])]),e("div",{staticClass:"col-12"},[e("div",{staticClass:"btn-box float-right"},[e("div",["Y"==this.store.state.menuRole.modifyRole?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:t.modify}},[t._v("수정")]):t._e(),"Y"==this.store.state.menuRole.deleteRole?e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.cancel}},[t._v("취소")]):t._e(),"Y"==this.store.state.menuRole.readRole?e("router-link",{staticClass:"btn btn-info",attrs:{role:"button",to:"/activity"}},[t._v("목록")]):t._e()],1)])])],2)])])])],1)},n=[],s=(e("456d"),e("ac6a"),e("386d"),e("c4f5")),c=e("9ce1"),o={name:"activity-modify",props:[],mounted:function(){this.search()},data:function(){return{activity:{bbs:{title:null,content:null},attachImage:[]},files:{},fileCount:1}},methods:{cancel:function(){this.router.go(-1)},search:function(){var t=this;this.$http.get("".concat(this.store.getters.restWebPath,"/activity/").concat(this.$route.params.id)).then(function(i){var e=i.data;t.activity=e.data})},modify:function(){var t=this;if(window.confirm("수정 하시겠습니까?")){var i=new FormData;i.append("activity",new Blob([JSON.stringify(this.activity)],{type:"application/json"})),Object.keys(this.files).forEach(function(e){i.append("files",t.files[e])}),this.$http.post("".concat(this.store.getters.restWebPath,"/activity/").concat(this.$route.params.id),i,{headers:{"Content-Type":"multipart/mixed"}}).then(function(i){var e=i.data;"success"==e.result?(alert("수정 되었습니다."),t.router.push("/activity/".concat(t.$route.params.id))):alert("수정 되지 않았습니다.")})}},uploadFile:function(t){var i=t.target.id,e=this;if(this.files[t.target.id]=t.target.files[0],t.target.files[0]){var a=new FileReader;a.onload=function(t){e.$refs[i][0].src=t.target.result},a.readAsDataURL(t.target.files[0])}},deleteFile:function(t){var i=this;window.confirm("파일을 삭제 하시겠습니까?")&&this.$http.delete("".concat(this.store.getters.restWebPath,"/activity/image/").concat(this.activity.id,"/").concat(t)).then(function(t){if("success"!=t.data.result)return alert(t.data.msg),!1;i.activity.attachImage=t.data.attachFile,alert(t.data.msg)})},fileCountAdd:function(){this.fileCount++}},computed:{},components:{SubLayout:s["a"],Quill:c["a"]}},l=o,r=(e("f64b"),e("2877")),u=Object(r["a"])(l,a,n,!1,null,"7667ead4",null);i["default"]=u.exports},f64b:function(t,i,e){"use strict";var a=e("1978"),n=e.n(a);n.a}}]);
//# sourceMappingURL=chunk-1d874f78.0f92e985.js.map